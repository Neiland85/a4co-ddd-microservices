# ADR-0011: Adopción de Playwright para pruebas E2E

## Contexto

El proyecto `a4co-ddd-microservices` requiere una herramienta robusta para pruebas de extremo a extremo (E2E) que permita validar la funcionalidad de los microservicios en diferentes navegadores y dispositivos. Actualmente, Cypress es una opción popular, pero presenta limitaciones en pruebas multi-navegador y soporte para escenarios avanzados.

## Decisión

Se decide adoptar Playwright como herramienta oficial para pruebas E2E debido a las siguientes razones:

1. **Soporte multi-navegador**: Playwright permite ejecutar pruebas en Chrome, Firefox, Safari y Edge, mientras que Cypress está limitado principalmente a Chrome.
2. **Escenarios avanzados**: Playwright soporta pruebas en dispositivos móviles, emulación de geolocalización, y manipulación de permisos de navegador.
3. **Integración con GitHub Actions**: Playwright se integra fácilmente con GitHub Actions para ejecutar pruebas automatizadas en pipelines CI/CD.
4. **Velocidad y rendimiento**: Playwright ofrece tiempos de ejecución más rápidos y mejor manejo de pruebas paralelas.

## Consecuencias

1. Se deberá configurar Playwright en el proyecto y descontinuar el uso de Cypress.
2. Los colaboradores deberán familiarizarse con la sintaxis y convenciones de Playwright.
3. Se implementarán pruebas E2E como parte del flujo de desarrollo en GitHub Actions.

---

## Integración con GitHub Actions

Para integrar Playwright con GitHub Actions, se seguirán los siguientes pasos:

1. **Instalación**: Agregar Playwright como dependencia en el proyecto.
2. **Configuración**: Crear un archivo de configuración `playwright.config.ts` para definir navegadores, dispositivos y opciones de ejecución.
3. **Pipeline**: Configurar un workflow en GitHub Actions que ejecute las pruebas E2E en cada PR y merge a `develop`.

---

## Convenciones para escribir tests

1. **Estructura**: Los tests se organizarán en carpetas por funcionalidad (`tests/e2e/`).
2. **Nombres**: Los archivos de test seguirán el formato `nombre-funcionalidad.spec.ts`.
3. **Buenas prácticas**: Se utilizarán fixtures para datos comunes y se evitará la duplicación de código.

---

## Referencias

Este ADR se alinea con las decisiones previas documentadas en `ADR-0010` y las convenciones establecidas en el archivo adjunto `MJZA_ZB1.0-🔖 ADRs a4co-ddd-microservices .pdf`.
