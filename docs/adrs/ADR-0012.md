# ADR-0012: Estrategia de Escalado y Despliegue en Producción

📅 Fecha: 2025-07-14  
👤 Autor: Neil Muñoz Lago  
🔖 Estado: Propuesta  
🔁 Reemplaza: —

---

## 🎯 Contexto

Con la plataforma OchioClub alcanzando producción, necesitamos definir un modelo de despliegue y escalabilidad que soporte crecimiento gradual y eventos de alta concurrencia sin caídas ni degradación de servicio.

---

## ✅ Decisión

- Desplegar todos los microservicios en AWS ECS Fargate.
- Utilizar estrategia de despliegue Blue-Green para minimizar downtime.
- Implementar políticas de auto-scaling basadas en CPU/memoria y latencia.
- Gestionar toda infraestructura con Terraform como código declarativo.

---

## 🔄 Alternativas consideradas

- ❌ Usar Kubernetes autogestionado: complejidad innecesaria para el nivel actual.
- ❌ Despliegue directo en instancias EC2: menor flexibilidad y coste operativo mayor.
- ✅ AWS ECS + Fargate + Terraform: equilibrio entre control, automatización y coste.

---

## 🧠 Consecuencias

- 🟢 Despliegue reproducible, versionado, sin intervención manual
- 🟢 Alta disponibilidad con escalado horizontal automático
- 🟡 Necesidad de definir healthchecks por microservicio
- 🔴 Costes aumentan si no se controlan triggers de escalado

---

## 🧩 Acciones asociadas

1. Escribir Dockerfiles optimizados para todos los servicios
2. Configurar Terraform para ECS tasks, clusters, servicios y roles IAM
3. Activar escalado automático por métrica en CloudWatch
4. Validar con despliegues canary y rollback automático en GitHub Actions

---

## 📎 Referencias

- [docs/infra/terraform-aws.md](../docs/infra/terraform-aws.md)
- [ADR-0006: CI/CD en GitHub Actions](./adr-0006-ci-cd.md)
