'use client';
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = TestHookPage;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const useProducts_1 = require("../../hooks/useProducts");
function TestHookPage() {
    const [renderCount, setRenderCount] = (0, react_1.useState)(0);
    const products = (0, useProducts_1.useProducts)({ autoFetch: false });
    const productSearch = (0, useProducts_1.useProductSearch)();
    // Contador de renders para detectar loops infinitos
    (0, react_1.useEffect)(() => {
        setRenderCount(prev => prev + 1);
    });
    return ((0, jsx_runtime_1.jsx)("div", { className: "min-h-screen bg-gray-50 p-8", children: (0, jsx_runtime_1.jsxs)("div", { className: "mx-auto max-w-4xl", children: [(0, jsx_runtime_1.jsx)("h1", { className: "mb-4 text-2xl font-bold", children: "\uD83E\uDDEA Test de Hook useProducts" }), (0, jsx_runtime_1.jsxs)("div", { className: "mb-4 rounded-lg bg-white p-4 shadow", children: [(0, jsx_runtime_1.jsx)("h2", { className: "mb-2 font-semibold", children: "Estado del Hook" }), (0, jsx_runtime_1.jsxs)("p", { children: ["Renders: ", (0, jsx_runtime_1.jsx)("span", { className: "font-mono text-lg", children: renderCount })] }), (0, jsx_runtime_1.jsxs)("p", { children: ["Loading: ", products.loading ? 'Sí' : 'No'] }), (0, jsx_runtime_1.jsxs)("p", { children: ["Productos: ", products.products.length] }), (0, jsx_runtime_1.jsxs)("p", { children: ["Error: ", products.error || 'Ninguno'] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "mb-4 rounded-lg bg-white p-4 shadow", children: [(0, jsx_runtime_1.jsx)("h2", { className: "mb-2 font-semibold", children: "Test de B\u00FAsqueda" }), (0, jsx_runtime_1.jsx)("input", { type: "text", value: productSearch.searchTerm, onChange: e => productSearch.setSearchTerm(e.target.value), placeholder: "Buscar productos...", className: "mb-2 w-full rounded border px-3 py-2" }), (0, jsx_runtime_1.jsxs)("p", { children: ["T\u00E9rmino de b\u00FAsqueda: ", productSearch.searchTerm] }), (0, jsx_runtime_1.jsxs)("p", { children: ["Buscando: ", productSearch.isSearching ? 'Sí' : 'No'] }), (0, jsx_runtime_1.jsxs)("p", { children: ["Resultados: ", productSearch.products.length] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-x-2", children: [(0, jsx_runtime_1.jsx)("button", { onClick: () => products.fetchProducts(), disabled: products.loading, className: "rounded bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 disabled:opacity-50", children: "Cargar Productos" }), (0, jsx_runtime_1.jsx)("button", { onClick: () => products.filterByCategory('aceite'), disabled: products.loading, className: "rounded bg-green-600 px-4 py-2 text-white hover:bg-green-700 disabled:opacity-50", children: "Filtrar Aceites" }), (0, jsx_runtime_1.jsx)("button", { onClick: () => products.reset(), className: "rounded bg-red-600 px-4 py-2 text-white hover:bg-red-700", children: "Reset" })] }), renderCount > 100 && ((0, jsx_runtime_1.jsx)("div", { className: "mt-4 rounded border border-red-400 bg-red-100 p-4", children: (0, jsx_runtime_1.jsxs)("p", { className: "font-semibold text-red-700", children: ["\u26A0\uFE0F ADVERTENCIA: Demasiados re-renders detectados (", renderCount, "). Esto indica un posible loop infinito."] }) })), products.products.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: "mt-4 rounded-lg bg-white p-4 shadow", children: [(0, jsx_runtime_1.jsx)("h3", { className: "mb-2 font-semibold", children: "Productos Cargados:" }), (0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-1 gap-2 md:grid-cols-2", children: products.products.slice(0, 4).map(product => ((0, jsx_runtime_1.jsxs)("div", { className: "rounded border p-2", children: [(0, jsx_runtime_1.jsx)("p", { className: "text-sm font-medium", children: product.name }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-600", children: product.producer }), (0, jsx_runtime_1.jsxs)("p", { className: "text-xs", children: ["\u20AC", product.price] })] }, product.id))) })] }))] }) }));
}
//# sourceMappingURL=page.js.map