'use client';
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = RegistrationForm;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const framer_motion_1 = require("framer-motion");
const react_hook_form_1 = require("react-hook-form");
const zod_1 = require("@hookform/resolvers/zod");
const card_1 = require("@/components/ui/card");
const button_1 = require("@/components/ui/button");
const input_1 = require("@/components/ui/input");
const label_1 = require("@/components/ui/label");
const checkbox_1 = require("@/components/ui/checkbox");
const validation_1 = require("@/lib/validation");
const animated_circles_1 = require("@/components/animated-circles");
const cookie_banner_1 = require("@/components/cookie-banner");
const offers_section_1 = require("@/components/offers-section");
const two_factor_verification_1 = require("@/components/two-factor-verification");
const lucide_react_1 = require("lucide-react");
function RegistrationForm() {
    const [currentStep, setCurrentStep] = (0, react_1.useState)('registration');
    const [showPassword, setShowPassword] = (0, react_1.useState)(false);
    const [showConfirmPassword, setShowConfirmPassword] = (0, react_1.useState)(false);
    const [isLoading, setIsLoading] = (0, react_1.useState)(false);
    const [registrationData, setRegistrationData] = (0, react_1.useState)(null);
    const { register, handleSubmit, formState: { errors }, watch, } = (0, react_hook_form_1.useForm)({
        resolver: (0, zod_1.zodResolver)(validation_1.registrationSchema),
    });
    const watchedFields = watch();
    const onSubmit = async (data) => {
        setIsLoading(true);
        setRegistrationData(data);
        // Simular registro
        await new Promise(resolve => setTimeout(resolve, 2000));
        setIsLoading(false);
        setCurrentStep('verification');
    };
    const handleVerificationSuccess = () => {
        setCurrentStep('success');
    };
    const handleBackToRegistration = () => {
        setCurrentStep('registration');
    };
    const getProgressPercentage = () => {
        const fields = ['name', 'email', 'password', 'confirmPassword'];
        const filledFields = fields.filter(field => watchedFields[field]);
        return (filledFields.length / fields.length) * 100;
    };
    return ((0, jsx_runtime_1.jsxs)("div", { className: "relative min-h-screen overflow-hidden bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-100", children: [(0, jsx_runtime_1.jsx)(animated_circles_1.AnimatedCircles, { section: currentStep }), (0, jsx_runtime_1.jsx)("div", { className: "container relative z-10 mx-auto px-4 py-8", children: (0, jsx_runtime_1.jsxs)("div", { className: "mx-auto grid max-w-7xl gap-8 lg:grid-cols-3", children: [(0, jsx_runtime_1.jsx)("div", { className: "lg:col-span-2", children: (0, jsx_runtime_1.jsxs)(framer_motion_1.AnimatePresence, { mode: "wait", children: [currentStep === 'registration' && ((0, jsx_runtime_1.jsx)(framer_motion_1.motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, exit: { opacity: 0, y: -20 }, className: "mx-auto w-full max-w-2xl", children: (0, jsx_runtime_1.jsxs)(card_1.Card, { className: "border-2 border-purple-200 bg-white/95 p-8 shadow-2xl backdrop-blur-lg", children: [(0, jsx_runtime_1.jsxs)("div", { className: "mb-8 text-center", children: [(0, jsx_runtime_1.jsx)(framer_motion_1.motion.div, { animate: { rotate: [0, 10, -10, 0] }, transition: { duration: 3, repeat: Number.POSITIVE_INFINITY }, className: "mb-4 inline-flex h-20 w-20 items-center justify-center rounded-full bg-gradient-to-r from-purple-600 to-blue-600 text-white", children: (0, jsx_runtime_1.jsx)(lucide_react_1.UserPlus, { size: 40 }) }), (0, jsx_runtime_1.jsx)("h1", { className: "mb-2 text-3xl font-bold text-gray-900", children: "\u00A1\u00DAnete a Nuestra Comunidad!" }), (0, jsx_runtime_1.jsx)("p", { className: "text-gray-600", children: "Crea tu cuenta y descubre un mundo de posibilidades" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "mb-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "mb-2 flex justify-between text-sm text-gray-600", children: [(0, jsx_runtime_1.jsx)("span", { children: "Progreso del registro" }), (0, jsx_runtime_1.jsxs)("span", { children: [Math.round(getProgressPercentage()), "%"] })] }), (0, jsx_runtime_1.jsx)("div", { className: "h-2 w-full rounded-full bg-gray-200", children: (0, jsx_runtime_1.jsx)(framer_motion_1.motion.div, { className: "h-2 rounded-full bg-gradient-to-r from-purple-600 to-blue-600", initial: { width: 0 }, animate: { width: `${getProgressPercentage()}%` }, transition: { duration: 0.3 } }) })] }), (0, jsx_runtime_1.jsxs)("form", { onSubmit: handleSubmit(onSubmit), className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "grid gap-4 md:grid-cols-2", children: [(0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { htmlFor: "name", className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.User, { size: 16, className: "text-purple-600" }), "Nombre Completo"] }), (0, jsx_runtime_1.jsx)(input_1.Input, { ...register('name'), id: "name", placeholder: "Tu nombre completo", className: "border-2 border-gray-200 transition-colors focus:border-purple-500" }), errors.name && ((0, jsx_runtime_1.jsx)(framer_motion_1.motion.p, { initial: { opacity: 0, y: -10 }, animate: { opacity: 1, y: 0 }, className: "text-sm text-red-600", children: errors.name.message }))] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { htmlFor: "email", className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Mail, { size: 16, className: "text-purple-600" }), "Correo Electr\u00F3nico"] }), (0, jsx_runtime_1.jsx)(input_1.Input, { ...register('email'), id: "email", type: "email", placeholder: "tu@email.com", className: "border-2 border-gray-200 transition-colors focus:border-purple-500" }), errors.email && ((0, jsx_runtime_1.jsx)(framer_motion_1.motion.p, { initial: { opacity: 0, y: -10 }, animate: { opacity: 1, y: 0 }, className: "text-sm text-red-600", children: errors.email.message }))] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "grid gap-4 md:grid-cols-2", children: [(0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { htmlFor: "password", className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Lock, { size: 16, className: "text-purple-600" }), "Contrase\u00F1a"] }), (0, jsx_runtime_1.jsxs)("div", { className: "relative", children: [(0, jsx_runtime_1.jsx)(input_1.Input, { ...register('password'), id: "password", type: showPassword ? 'text' : 'password', placeholder: "M\u00EDnimo 8 caracteres", className: "border-2 border-gray-200 pr-10 transition-colors focus:border-purple-500" }), (0, jsx_runtime_1.jsx)("button", { type: "button", onClick: () => setShowPassword(!showPassword), className: "absolute right-3 top-1/2 -translate-y-1/2 transform text-gray-500 hover:text-purple-600", children: showPassword ? (0, jsx_runtime_1.jsx)(lucide_react_1.EyeOff, { size: 16 }) : (0, jsx_runtime_1.jsx)(lucide_react_1.Eye, { size: 16 }) })] }), errors.password && ((0, jsx_runtime_1.jsx)(framer_motion_1.motion.p, { initial: { opacity: 0, y: -10 }, animate: { opacity: 1, y: 0 }, className: "text-sm text-red-600", children: errors.password.message }))] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { htmlFor: "confirmPassword", className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Lock, { size: 16, className: "text-purple-600" }), "Confirmar Contrase\u00F1a"] }), (0, jsx_runtime_1.jsxs)("div", { className: "relative", children: [(0, jsx_runtime_1.jsx)(input_1.Input, { ...register('confirmPassword'), id: "confirmPassword", type: showConfirmPassword ? 'text' : 'password', placeholder: "Repite tu contrase\u00F1a", className: "border-2 border-gray-200 pr-10 transition-colors focus:border-purple-500" }), (0, jsx_runtime_1.jsx)("button", { type: "button", onClick: () => setShowConfirmPassword(!showConfirmPassword), className: "absolute right-3 top-1/2 -translate-y-1/2 transform text-gray-500 hover:text-purple-600", children: showConfirmPassword ? (0, jsx_runtime_1.jsx)(lucide_react_1.EyeOff, { size: 16 }) : (0, jsx_runtime_1.jsx)(lucide_react_1.Eye, { size: 16 }) })] }), errors.confirmPassword && ((0, jsx_runtime_1.jsx)(framer_motion_1.motion.p, { initial: { opacity: 0, y: -10 }, animate: { opacity: 1, y: 0 }, className: "text-sm text-red-600", children: errors.confirmPassword.message }))] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { htmlFor: "phone", className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Phone, { size: 16, className: "text-purple-600" }), "N\u00FAmero de Tel\u00E9fono (Opcional)", (0, jsx_runtime_1.jsx)("span", { className: "rounded-full bg-purple-100 px-2 py-1 text-xs text-purple-700", children: "Para verificaci\u00F3n 2FA" })] }), (0, jsx_runtime_1.jsx)(input_1.Input, { ...register('phone'), id: "phone", type: "tel", placeholder: "+1 (555) 123-4567", className: "border-2 border-gray-200 transition-colors focus:border-purple-500" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-start space-x-3", children: [(0, jsx_runtime_1.jsx)(checkbox_1.Checkbox, { ...register('acceptTerms'), id: "acceptTerms", className: "mt-1" }), (0, jsx_runtime_1.jsxs)(label_1.Label, { htmlFor: "acceptTerms", className: "text-sm leading-relaxed text-gray-700", children: ["Acepto los", ' ', (0, jsx_runtime_1.jsx)("a", { href: "#", className: "font-medium text-purple-600 hover:underline", children: "T\u00E9rminos y Condiciones" }), ' ', "y la", ' ', (0, jsx_runtime_1.jsx)("a", { href: "#", className: "font-medium text-purple-600 hover:underline", children: "Pol\u00EDtica de Privacidad" })] })] }), errors.acceptTerms && ((0, jsx_runtime_1.jsx)(framer_motion_1.motion.p, { initial: { opacity: 0, y: -10 }, animate: { opacity: 1, y: 0 }, className: "text-sm text-red-600", children: errors.acceptTerms.message })), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-start space-x-3", children: [(0, jsx_runtime_1.jsx)(checkbox_1.Checkbox, { ...register('marketingEmails'), id: "marketingEmails", className: "mt-1" }), (0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: "marketingEmails", className: "text-sm leading-relaxed text-gray-700", children: "Quiero recibir ofertas especiales y noticias por correo electr\u00F3nico" })] })] }), (0, jsx_runtime_1.jsx)(framer_motion_1.motion.div, { whileHover: { scale: 1.02 }, whileTap: { scale: 0.98 }, children: (0, jsx_runtime_1.jsx)(button_1.Button, { type: "submit", disabled: isLoading, className: "h-12 w-full bg-gradient-to-r from-purple-600 to-blue-600 text-lg font-semibold text-white shadow-lg transition-all duration-300 hover:from-purple-700 hover:to-blue-700 hover:shadow-xl", children: isLoading ? ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)("div", { className: "h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent" }), "Creando tu cuenta..."] })) : ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Sparkles, { size: 20 }), "Crear Mi Cuenta"] })) }) }), (0, jsx_runtime_1.jsx)("div", { className: "text-center", children: (0, jsx_runtime_1.jsxs)("p", { className: "text-gray-600", children: ["\u00BFYa tienes una cuenta?", ' ', (0, jsx_runtime_1.jsx)("a", { href: "#", className: "font-medium text-purple-600 hover:underline", children: "Inicia sesi\u00F3n aqu\u00ED" })] }) })] })] }) }, "registration")), currentStep === 'verification' && registrationData && ((0, jsx_runtime_1.jsx)(two_factor_verification_1.TwoFactorVerification, { email: registrationData.email, phone: registrationData.phone, onBack: handleBackToRegistration, onSuccess: handleVerificationSuccess })), currentStep === 'success' && ((0, jsx_runtime_1.jsx)(framer_motion_1.motion.div, { initial: { opacity: 0, scale: 0.8 }, animate: { opacity: 1, scale: 1 }, className: "mx-auto w-full max-w-md", children: (0, jsx_runtime_1.jsxs)(card_1.Card, { className: "border-2 border-green-200 bg-white/95 p-8 text-center shadow-2xl backdrop-blur-lg", children: [(0, jsx_runtime_1.jsx)(framer_motion_1.motion.div, { animate: { scale: [1, 1.1, 1] }, transition: { duration: 2, repeat: Number.POSITIVE_INFINITY }, className: "mb-6 inline-flex h-20 w-20 items-center justify-center rounded-full bg-gradient-to-r from-green-500 to-emerald-500 text-white", children: (0, jsx_runtime_1.jsx)(lucide_react_1.CheckCircle, { size: 40 }) }), (0, jsx_runtime_1.jsx)("h2", { className: "mb-4 text-2xl font-bold text-gray-900", children: "\u00A1Cuenta Creada Exitosamente!" }), (0, jsx_runtime_1.jsx)("p", { className: "mb-6 text-gray-600", children: "Bienvenido a nuestra comunidad. Tu cuenta ha sido verificada y est\u00E1 lista para usar." }), (0, jsx_runtime_1.jsx)(button_1.Button, { className: "w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600", children: "Comenzar a Explorar" })] }) }, "success"))] }) }), (0, jsx_runtime_1.jsx)("div", { className: "lg:col-span-1", children: (0, jsx_runtime_1.jsx)("div", { className: "sticky top-8", children: (0, jsx_runtime_1.jsx)(offers_section_1.OffersSection, {}) }) })] }) }), (0, jsx_runtime_1.jsx)(cookie_banner_1.CookieBanner, {})] }));
}
//# sourceMappingURL=registration-form.js.map