'use client';
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = ProductSalesChart;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const recharts_1 = require("recharts");
const card_1 = require("@/components/ui/card");
const button_1 = require("@/components/ui/button");
const badge_1 = require("@/components/ui/badge");
const lucide_react_1 = require("lucide-react");
const utils_1 = require("@/lib/utils");
const categoryColors = {
    panaderia: '#b08968',
    queseria: '#f4d03f',
    aceite: '#8a9b73',
    embutidos: '#cd6155',
    miel: '#f7dc6f',
    conservas: '#85c1e9',
    vinos: '#8e44ad',
    dulces: '#f1948a',
    artesania: '#82e0aa',
};
const CustomTooltip = ({ active, payload, label }) => {
    if (active && payload && payload.length) {
        const data = payload[0].payload;
        return ((0, jsx_runtime_1.jsxs)("div", { className: "shadow-natural-lg min-w-48 rounded-lg border border-gray-200 bg-white p-4", children: [(0, jsx_runtime_1.jsx)("p", { className: "mb-2 font-medium text-gray-900", children: label }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-600", children: "Ventas:" }), (0, jsx_runtime_1.jsx)("span", { className: "text-sm font-semibold text-gray-900", children: data.totalSales })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-600", children: "Ingresos:" }), (0, jsx_runtime_1.jsxs)("span", { className: "text-sm font-semibold text-gray-900", children: ["\u20AC", data.totalRevenue.toFixed(2)] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-600", children: "Conversi\u00F3n:" }), (0, jsx_runtime_1.jsxs)("span", { className: (0, utils_1.cn)('flex items-center text-sm font-semibold', data.conversionRate >= 0 ? 'text-green-600' : 'text-red-600'), children: [data.conversionRate >= 0 ? ((0, jsx_runtime_1.jsx)(lucide_react_1.TrendingUp, { className: "mr-1 h-3 w-3" })) : ((0, jsx_runtime_1.jsx)(lucide_react_1.TrendingDown, { className: "mr-1 h-3 w-3" })), Math.abs(data.conversionRate).toFixed(1), "%"] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-600", children: "Vistas:" }), (0, jsx_runtime_1.jsx)("span", { className: "text-sm font-semibold text-gray-900", children: data.viewsCount.toLocaleString() })] })] })] }));
    }
    return null;
};
function ProductSalesChart({ data, className }) {
    const [sortBy, setSortBy] = (0, react_1.useState)('totalSales');
    const [hoveredBar, setHoveredBar] = (0, react_1.useState)(null);
    const sortedData = [...data].sort((a, b) => b[sortBy] - a[sortBy]);
    const topProducts = sortedData.slice(0, 5);
    return ((0, jsx_runtime_1.jsxs)(card_1.Card, { className: (0, utils_1.cn)('shadow-natural-lg hover:shadow-natural-xl transition-all duration-300', className), children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("div", { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Package, { className: "h-5 w-5 text-blue-600" }), "Productos M\u00E1s Vendidos"] }) }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-2", children: [(0, jsx_runtime_1.jsx)(button_1.Button, { variant: sortBy === 'totalSales' ? 'default' : 'outline', size: "sm", onClick: () => setSortBy('totalSales'), className: "transition-all duration-300 hover:scale-105", children: "Por Ventas" }), (0, jsx_runtime_1.jsx)(button_1.Button, { variant: sortBy === 'totalRevenue' ? 'default' : 'outline', size: "sm", onClick: () => setSortBy('totalRevenue'), className: "transition-all duration-300 hover:scale-105", children: "Por Ingresos" })] })] }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { children: [(0, jsx_runtime_1.jsx)("div", { className: "mb-6 space-y-4", children: topProducts.map((product, index) => ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between rounded-lg border p-4 hover:bg-gray-50", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-4", children: [(0, jsx_runtime_1.jsx)("div", { className: "flex h-8 w-8 items-center justify-center rounded-full bg-blue-100 text-sm font-semibold text-blue-600", children: index + 1 }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h3", { className: "font-medium text-gray-900", children: product.productName }), (0, jsx_runtime_1.jsxs)("div", { className: "mt-1 flex items-center gap-4", children: [(0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "secondary", className: "text-xs", children: product.category }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-1 text-xs text-gray-500", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Eye, { className: "h-3 w-3" }), product.viewsCount.toLocaleString(), " vistas"] })] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-right", children: [(0, jsx_runtime_1.jsxs)("div", { className: "mb-1 flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ShoppingCart, { className: "h-4 w-4 text-green-600" }), (0, jsx_runtime_1.jsx)("span", { className: "font-semibold text-gray-900", children: product.totalSales })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-sm text-gray-600", children: ["\u20AC", product.totalRevenue.toLocaleString()] }), (0, jsx_runtime_1.jsxs)("div", { className: "mt-1 flex items-center gap-1 text-xs text-green-600", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.TrendingUp, { className: "h-3 w-3" }), product.conversionRate.toFixed(1), "% conversi\u00F3n"] })] })] }, product.productId))) }), (0, jsx_runtime_1.jsx)("div", { className: "h-80", children: (0, jsx_runtime_1.jsx)(recharts_1.ResponsiveContainer, { width: "100%", height: "100%", children: (0, jsx_runtime_1.jsxs)(recharts_1.BarChart, { data: topProducts, layout: "horizontal", onMouseMove: e => setHoveredBar(e?.activeTooltipIndex || null), onMouseLeave: () => setHoveredBar(null), children: [(0, jsx_runtime_1.jsx)(recharts_1.CartesianGrid, { strokeDasharray: "3 3", stroke: "#f0f0f0" }), (0, jsx_runtime_1.jsx)(recharts_1.XAxis, { type: "number", stroke: "#666", fontSize: 12, tickLine: false, axisLine: false, tickFormatter: value => sortBy === 'totalRevenue' ? `â‚¬${value}` : value.toString() }), (0, jsx_runtime_1.jsx)(recharts_1.YAxis, { type: "category", dataKey: "productName", stroke: "#666", fontSize: 12, tickLine: false, axisLine: false, width: 120, tickFormatter: value => value.length > 15 ? `${value.substring(0, 15)}...` : value }), (0, jsx_runtime_1.jsx)(recharts_1.Tooltip, { content: (0, jsx_runtime_1.jsx)(CustomTooltip, {}) }), (0, jsx_runtime_1.jsx)(recharts_1.Bar, { dataKey: sortBy, radius: [0, 4, 4, 0], children: topProducts.map((entry, index) => ((0, jsx_runtime_1.jsx)(recharts_1.Cell, { fill: categoryColors[entry.category] || '#8a9b73', style: {
                                                filter: hoveredBar === index ? 'brightness(1.1)' : 'none',
                                                transition: 'all 0.3s ease',
                                            } }, `cell-${index}`))) })] }) }) }), (0, jsx_runtime_1.jsxs)("div", { className: "mt-6 space-y-2", children: [(0, jsx_runtime_1.jsx)("h4", { className: "mb-3 font-medium text-gray-900", children: "Lista Completa de Productos" }), (0, jsx_runtime_1.jsx)("div", { className: "max-h-64 space-y-2 overflow-y-auto", children: sortedData.map((product, index) => ((0, jsx_runtime_1.jsxs)("div", { className: "hover:scale-102 group flex cursor-pointer items-center justify-between rounded-lg bg-gray-50 p-3 transition-all duration-300 hover:bg-gray-100", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-3", children: [(0, jsx_runtime_1.jsx)("div", { className: "from-a4co-olive-400 to-a4co-clay-400 flex h-6 w-6 items-center justify-center rounded-full bg-gradient-to-br text-xs font-bold text-white", children: index + 1 }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("div", { className: "group-hover:text-a4co-olive-600 font-medium text-gray-900 transition-colors", children: product.productName }), (0, jsx_runtime_1.jsx)("div", { className: "text-sm text-gray-500", children: product.category })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-right", children: [(0, jsx_runtime_1.jsxs)("div", { className: "mb-1 flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ShoppingCart, { className: "h-4 w-4 text-green-600" }), (0, jsx_runtime_1.jsxs)("span", { className: "font-semibold text-gray-900", children: [product.totalSales, " ventas"] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-sm text-gray-600", children: ["\u20AC", product.totalRevenue.toLocaleString()] })] }), (0, jsx_runtime_1.jsxs)("div", { className: (0, utils_1.cn)('flex items-center text-sm font-medium', product.conversionRate >= 0 ? 'text-green-600' : 'text-red-600'), children: [product.conversionRate >= 0 ? ((0, jsx_runtime_1.jsx)(lucide_react_1.TrendingUp, { className: "mr-1 h-3 w-3" })) : ((0, jsx_runtime_1.jsx)(lucide_react_1.TrendingDown, { className: "mr-1 h-3 w-3" })), Math.abs(product.conversionRate).toFixed(1), "% conversi\u00F3n"] })] })] }, product.productId))) })] })] })] }));
}
//# sourceMappingURL=product-sales-chart.js.map