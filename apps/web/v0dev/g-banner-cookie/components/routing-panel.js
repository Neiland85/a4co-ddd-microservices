'use client';
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = RoutingPanel;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const button_1 = require("@/components/ui/button");
const card_1 = require("@/components/ui/card");
const select_1 = require("@/components/ui/select");
const switch_1 = require("@/components/ui/switch");
const label_1 = require("@/components/ui/label");
const badge_1 = require("@/components/ui/badge");
const alert_1 = require("@/components/ui/alert");
const lucide_react_1 = require("lucide-react");
const transportModes = [
    { value: 'driving-car', label: 'Coche', icon: (0, jsx_runtime_1.jsx)(lucide_react_1.Car, { className: "h-4 w-4" }) },
    { value: 'cycling-regular', label: 'Bicicleta', icon: (0, jsx_runtime_1.jsx)(lucide_react_1.Bike, { className: "h-4 w-4" }) },
    { value: 'foot-walking', label: 'A pie', icon: (0, jsx_runtime_1.jsx)(lucide_react_1.MapPin, { className: "h-4 w-4" }) },
];
function RoutingPanel({ route, isCalculating, error, onCalculateRoute, onClearRoute, startAddress = 'Tu ubicaciÃ³n', endAddress = 'Destino seleccionado', className = '', }) {
    const [selectedMode, setSelectedMode] = (0, react_1.useState)('driving-car');
    const [avoidTolls, setAvoidTolls] = (0, react_1.useState)(false);
    const [avoidHighways, setAvoidHighways] = (0, react_1.useState)(false);
    const [showAdvanced, setShowAdvanced] = (0, react_1.useState)(false);
    const handleCalculateRoute = () => {
        onCalculateRoute({
            mode: selectedMode,
            avoidTolls,
            avoidHighways,
        });
    };
    const getModeIcon = (mode) => {
        return transportModes.find(m => m.value === mode)?.icon || (0, jsx_runtime_1.jsx)(lucide_react_1.Car, { className: "h-4 w-4" });
    };
    return ((0, jsx_runtime_1.jsxs)(card_1.Card, { className: `shadow-natural-lg border-a4co-olive-200 ${className}`, children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { className: "pb-3", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: "flex items-center text-lg font-semibold text-gray-900", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Navigation, { className: "text-a4co-olive-600 mr-2 h-5 w-5" }), "C\u00F3mo Llegar"] }), route && ((0, jsx_runtime_1.jsx)(button_1.Button, { variant: "ghost", size: "sm", onClick: onClearRoute, className: "h-8 w-8 p-0 text-gray-500 hover:text-gray-700", "aria-label": "Limpiar ruta", children: (0, jsx_runtime_1.jsx)(lucide_react_1.X, { className: "h-4 w-4" }) }))] }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: "space-y-4", children: [route && ((0, jsx_runtime_1.jsxs)("div", { className: "bg-a4co-olive-50 border-a4co-olive-200 rounded-lg border p-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "mb-2 flex items-center justify-between", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-2", children: [getModeIcon(selectedMode), (0, jsx_runtime_1.jsx)("span", { className: "text-a4co-olive-700 font-medium", children: transportModes.find(m => m.value === selectedMode)?.label })] }), (0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: "secondary", className: "bg-a4co-olive-100 text-a4co-olive-700", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.RouteIcon, { className: "mr-1 h-3 w-3" }), "Ruta calculada"] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-2 gap-4 text-sm", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.MapPin, { className: "text-a4co-olive-600 h-4 w-4" }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("div", { className: "font-medium text-gray-900", children: route.summary.distance }), (0, jsx_runtime_1.jsx)("div", { className: "text-gray-600", children: "Distancia" })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Clock, { className: "text-a4co-olive-600 h-4 w-4" }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("div", { className: "font-medium text-gray-900", children: route.summary.duration }), (0, jsx_runtime_1.jsx)("div", { className: "text-gray-600", children: "Tiempo estimado" })] })] })] })] })), error && ((0, jsx_runtime_1.jsxs)(alert_1.Alert, { className: "border-yellow-200 bg-yellow-50", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.AlertCircle, { className: "h-4 w-4 text-yellow-600" }), (0, jsx_runtime_1.jsx)(alert_1.AlertDescription, { className: "text-yellow-800", children: error })] })), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-3", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-3", children: [(0, jsx_runtime_1.jsx)("div", { className: "h-3 w-3 flex-shrink-0 rounded-full bg-green-500" }), (0, jsx_runtime_1.jsxs)("div", { className: "min-w-0 flex-1", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-sm font-medium text-gray-900", children: "Origen" }), (0, jsx_runtime_1.jsx)("div", { className: "truncate text-xs text-gray-600", children: startAddress })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-3", children: [(0, jsx_runtime_1.jsx)("div", { className: "h-3 w-3 flex-shrink-0 rounded-full bg-red-500" }), (0, jsx_runtime_1.jsxs)("div", { className: "min-w-0 flex-1", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-sm font-medium text-gray-900", children: "Destino" }), (0, jsx_runtime_1.jsx)("div", { className: "truncate text-xs text-gray-600", children: endAddress })] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: "text-sm font-medium text-gray-700", children: "Medio de transporte" }), (0, jsx_runtime_1.jsxs)(select_1.Select, { value: selectedMode, onValueChange: (value) => setSelectedMode(value), children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { className: "focus:border-a4co-olive-500 focus:ring-a4co-olive-500 border-gray-300", children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, {}) }), (0, jsx_runtime_1.jsx)(select_1.SelectContent, { children: transportModes.map(mode => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: mode.value, children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-2", children: [mode.icon, (0, jsx_runtime_1.jsx)("span", { children: mode.label })] }) }, mode.value))) })] })] }), selectedMode === 'driving-car' && ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-3", children: [(0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "ghost", size: "sm", onClick: () => setShowAdvanced(!showAdvanced), className: "text-a4co-olive-600 hover:text-a4co-olive-700 hover:bg-a4co-olive-50 h-auto p-0 font-normal", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Settings, { className: "mr-1 h-4 w-4" }), "Opciones avanzadas"] }), showAdvanced && ((0, jsx_runtime_1.jsxs)("div", { className: "border-a4co-olive-200 space-y-3 border-l-2 pl-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: "avoid-tolls", className: "text-sm text-gray-700", children: "Evitar peajes" }), (0, jsx_runtime_1.jsx)(switch_1.Switch, { id: "avoid-tolls", checked: avoidTolls, onCheckedChange: setAvoidTolls, className: "shadow-natural-sm" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: "avoid-highways", className: "text-sm text-gray-700", children: "Evitar autopistas" }), (0, jsx_runtime_1.jsx)(switch_1.Switch, { id: "avoid-highways", checked: avoidHighways, onCheckedChange: setAvoidHighways, className: "shadow-natural-sm" })] })] }))] })), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: handleCalculateRoute, disabled: isCalculating, className: "from-a4co-olive-500 to-a4co-clay-500 hover:from-a4co-olive-600 hover:to-a4co-clay-600 shadow-mixed hover:shadow-mixed-lg w-full bg-gradient-to-r text-white transition-all duration-300", children: isCalculating ? ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Loader2, { className: "mr-2 h-4 w-4 animate-spin" }), "Calculando ruta..."] })) : ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Navigation, { className: "mr-2 h-4 w-4" }), route ? 'Recalcular Ruta' : 'Calcular Ruta'] })) }), route && route.segments.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: "text-sm font-medium text-gray-700", children: "Instrucciones" }), (0, jsx_runtime_1.jsxs)("div", { className: "max-h-32 space-y-1 overflow-y-auto", children: [route.segments.slice(0, 5).map((segment, index) => ((0, jsx_runtime_1.jsxs)("div", { className: "rounded bg-gray-50 p-2 text-xs text-gray-600", children: [(0, jsx_runtime_1.jsxs)("div", { className: "font-medium", children: [index + 1, ". ", segment.instruction] }), (0, jsx_runtime_1.jsxs)("div", { className: "mt-1 text-gray-500", children: [(segment.distance / 1000).toFixed(1), " km \u2022 ", Math.round(segment.duration / 60), ' ', "min"] })] }, index))), route.segments.length > 5 && ((0, jsx_runtime_1.jsxs)("div", { className: "py-1 text-center text-xs text-gray-500", children: ["+", route.segments.length - 5, " instrucciones m\u00E1s"] }))] })] }))] })] }));
}
//# sourceMappingURL=routing-panel.js.map