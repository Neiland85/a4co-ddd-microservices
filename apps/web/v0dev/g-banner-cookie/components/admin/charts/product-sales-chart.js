'use client';
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = ProductSalesChart;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const recharts_1 = require("recharts");
const card_1 = require("@/components/ui/card");
const button_1 = require("@/components/ui/button");
const badge_1 = require("@/components/ui/badge");
const lucide_react_1 = require("lucide-react");
const utils_1 = require("@/lib/utils");
const categoryColors = {
    panaderia: '#b08968',
    queseria: '#f4d03f',
    aceite: '#8a9b73',
    embutidos: '#cd6155',
    miel: '#f7dc6f',
    conservas: '#85c1e9',
    vinos: '#8e44ad',
    dulces: '#f1948a',
    artesania: '#82e0aa',
};
const CustomTooltip = ({ active, payload, label }) => {
    if (active && payload?.length) {
        const data = payload[0].payload;
        return ((0, jsx_runtime_1.jsxs)("div", { className: "shadow-natural-lg min-w-48 rounded-lg border border-gray-200 bg-white p-4", children: [(0, jsx_runtime_1.jsx)("p", { className: "mb-2 font-medium text-gray-900", children: label }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-600", children: "Ventas:" }), (0, jsx_runtime_1.jsx)("span", { className: "text-sm font-semibold text-gray-900", children: data.sales })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-600", children: "Ingresos:" }), (0, jsx_runtime_1.jsxs)("span", { className: "text-sm font-semibold text-gray-900", children: ["\u20AC", data.revenue.toFixed(2)] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm text-gray-600", children: "Crecimiento:" }), (0, jsx_runtime_1.jsxs)("span", { className: (0, utils_1.cn)('flex items-center text-sm font-semibold', data.growth >= 0 ? 'text-green-600' : 'text-red-600'), children: [data.growth >= 0 ? ((0, jsx_runtime_1.jsx)(lucide_react_1.TrendingUp, { className: "mr-1 h-3 w-3" })) : ((0, jsx_runtime_1.jsx)(lucide_react_1.TrendingDown, { className: "mr-1 h-3 w-3" })), Math.abs(data.growth).toFixed(1), "%"] })] })] })] }));
    }
    return null;
};
function ProductSalesChart({ data, className }) {
    const [sortBy, setSortBy] = (0, react_1.useState)('sales');
    const [hoveredBar, setHoveredBar] = (0, react_1.useState)(null);
    const sortedData = [...data].sort((a, b) => b[sortBy] - a[sortBy]);
    const topProducts = sortedData.slice(0, 10);
    return ((0, jsx_runtime_1.jsxs)(card_1.Card, { className: (0, utils_1.cn)('shadow-natural-lg hover:shadow-natural-xl transition-all duration-300', className), children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: "flex items-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Package, { className: "text-a4co-olive-600 mr-2 h-5 w-5" }), "Productos M\u00E1s Vendidos"] }), (0, jsx_runtime_1.jsx)(card_1.CardDescription, { children: "Top 10 productos por ventas e ingresos" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-2", children: [(0, jsx_runtime_1.jsx)(button_1.Button, { variant: sortBy === 'sales' ? 'default' : 'outline', size: "sm", onClick: () => setSortBy('sales'), className: "transition-all duration-300 hover:scale-105", children: "Por Ventas" }), (0, jsx_runtime_1.jsx)(button_1.Button, { variant: sortBy === 'revenue' ? 'default' : 'outline', size: "sm", onClick: () => setSortBy('revenue'), className: "transition-all duration-300 hover:scale-105", children: "Por Ingresos" })] })] }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { children: [(0, jsx_runtime_1.jsx)("div", { className: "mb-6 grid grid-cols-1 gap-4 md:grid-cols-3", children: topProducts.slice(0, 3).map((product, index) => ((0, jsx_runtime_1.jsxs)("div", { className: "hover:shadow-natural-md cursor-pointer rounded-lg border bg-gradient-to-r from-gray-50 to-gray-100 p-4 transition-all duration-300 hover:scale-105", children: [(0, jsx_runtime_1.jsxs)("div", { className: "mb-2 flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("div", { className: "from-a4co-olive-400 to-a4co-clay-400 flex h-8 w-8 items-center justify-center rounded-full bg-gradient-to-br text-sm font-bold text-white", children: index + 1 }), (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "outline", style: {
                                                backgroundColor: `${categoryColors[product.category]}20`,
                                                borderColor: categoryColors[product.category],
                                                color: categoryColors[product.category],
                                            }, children: product.category })] }), (0, jsx_runtime_1.jsx)("h4", { className: "mb-1 truncate font-medium text-gray-900", children: product.name }), (0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between text-sm", children: [(0, jsx_runtime_1.jsxs)("span", { className: "text-gray-600", children: ["Ventas: ", product.sales] }), (0, jsx_runtime_1.jsxs)("span", { className: "font-semibold text-gray-900", children: ["\u20AC", product.revenue.toFixed(2)] })] })] }, product.name))) }), (0, jsx_runtime_1.jsx)("div", { className: "h-80", children: (0, jsx_runtime_1.jsx)(recharts_1.ResponsiveContainer, { width: "100%", height: "100%", children: (0, jsx_runtime_1.jsxs)(recharts_1.BarChart, { data: topProducts, layout: "horizontal", onMouseMove: e => setHoveredBar(typeof e?.activeTooltipIndex === 'number' ? e.activeTooltipIndex : null), onMouseLeave: () => setHoveredBar(null), children: [(0, jsx_runtime_1.jsx)(recharts_1.CartesianGrid, { strokeDasharray: "3 3", stroke: "#f0f0f0" }), (0, jsx_runtime_1.jsx)(recharts_1.XAxis, { type: "number", stroke: "#666", fontSize: 12, tickLine: false, axisLine: false, tickFormatter: value => (sortBy === 'revenue' ? `â‚¬${value}` : value.toString()) }), (0, jsx_runtime_1.jsx)(recharts_1.YAxis, { type: "category", dataKey: "name", stroke: "#666", fontSize: 12, tickLine: false, axisLine: false, width: 120, tickFormatter: value => value.length > 15 ? `${value.substring(0, 15)}...` : value }), (0, jsx_runtime_1.jsx)(recharts_1.Tooltip, { content: (0, jsx_runtime_1.jsx)(CustomTooltip, {}) }), (0, jsx_runtime_1.jsx)(recharts_1.Bar, { dataKey: sortBy, radius: [0, 4, 4, 0], children: topProducts.map((entry, index) => ((0, jsx_runtime_1.jsx)(recharts_1.Cell, { fill: categoryColors[entry.category] || '#8a9b73', style: {
                                                filter: hoveredBar === index ? 'brightness(1.1)' : 'none',
                                                transition: 'all 0.3s ease',
                                            } }, `cell-${index}`))) })] }) }) }), (0, jsx_runtime_1.jsxs)("div", { className: "mt-6 space-y-2", children: [(0, jsx_runtime_1.jsx)("h4", { className: "mb-3 font-medium text-gray-900", children: "Lista Completa de Productos" }), (0, jsx_runtime_1.jsx)("div", { className: "max-h-64 space-y-2 overflow-y-auto", children: sortedData.map((product, index) => ((0, jsx_runtime_1.jsxs)("div", { className: "hover:scale-102 group flex cursor-pointer items-center justify-between rounded-lg bg-gray-50 p-3 transition-all duration-300 hover:bg-gray-100", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-3", children: [(0, jsx_runtime_1.jsx)("div", { className: "from-a4co-olive-400 to-a4co-clay-400 flex h-6 w-6 items-center justify-center rounded-full bg-gradient-to-br text-xs font-bold text-white", children: index + 1 }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("div", { className: "group-hover:text-a4co-olive-600 font-medium text-gray-900 transition-colors", children: product.name }), (0, jsx_runtime_1.jsx)("div", { className: "text-sm text-gray-500", children: product.category })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-right", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-sm font-semibold text-gray-900", children: [product.sales, " ventas"] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-sm text-gray-600", children: ["\u20AC", product.revenue.toFixed(2)] })] }), (0, jsx_runtime_1.jsxs)("div", { className: (0, utils_1.cn)('flex items-center text-sm font-medium', product.growth >= 0 ? 'text-green-600' : 'text-red-600'), children: [product.growth >= 0 ? ((0, jsx_runtime_1.jsx)(lucide_react_1.TrendingUp, { className: "mr-1 h-3 w-3" })) : ((0, jsx_runtime_1.jsx)(lucide_react_1.TrendingDown, { className: "mr-1 h-3 w-3" })), Math.abs(product.growth).toFixed(1), "%"] })] })] }, product.name))) })] })] })] }));
}
//# sourceMappingURL=product-sales-chart.js.map