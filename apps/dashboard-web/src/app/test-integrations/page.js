// Página de demostración y testing de todas las integraciones
'use client';
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const useSalesOpportunities_1 = require("../../hooks/useSalesOpportunities");
const useProducts_1 = require("../../hooks/useProducts");
const useArtisans_1 = require("../../hooks/useArtisans");
const useGeolocation_1 = require("../../hooks/useGeolocation");
const V0ComponentTemplate_1 = __importDefault(require("../../components/v0/V0ComponentTemplate"));
const TestSection = ({ title, children }) => ((0, jsx_runtime_1.jsxs)("div", { className: "mb-6 rounded-lg bg-white p-6 shadow-md", children: [(0, jsx_runtime_1.jsx)("h2", { className: "mb-4 text-xl font-bold text-gray-800", children: title }), children] }));
const ApiTest = ({ title, endpoint, onTest, loading, data, error }) => ((0, jsx_runtime_1.jsxs)("div", { className: "mb-4 rounded-lg border p-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "mb-2 flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("h3", { className: "font-medium text-gray-800", children: title }), (0, jsx_runtime_1.jsx)("button", { onClick: onTest, disabled: loading, className: "rounded bg-blue-600 px-3 py-1 text-sm text-white hover:bg-blue-700 disabled:opacity-50", children: loading ? 'Testing...' : 'Test API' })] }), (0, jsx_runtime_1.jsxs)("p", { className: "mb-2 text-sm text-gray-600", children: ["Endpoint: ", (0, jsx_runtime_1.jsx)("code", { children: endpoint })] }), error && ((0, jsx_runtime_1.jsx)("div", { className: "mb-2 rounded border border-red-200 bg-red-50 p-2", children: (0, jsx_runtime_1.jsxs)("p", { className: "text-sm text-red-600", children: ["Error: ", error] }) })), data && ((0, jsx_runtime_1.jsxs)("div", { className: "rounded border border-green-200 bg-green-50 p-2", children: [(0, jsx_runtime_1.jsx)("p", { className: "mb-1 text-sm text-green-600", children: "\u2705 Respuesta exitosa:" }), (0, jsx_runtime_1.jsxs)("pre", { className: "overflow-x-auto text-xs text-gray-600", children: [JSON.stringify(data, null, 2).slice(0, 200), "..."] })] }))] }));
const IntegrationTestPage = () => {
    const [apiResults, setApiResults] = (0, react_1.useState)({});
    const [apiLoading, setApiLoading] = (0, react_1.useState)({});
    const [apiErrors, setApiErrors] = (0, react_1.useState)({});
    // Hooks para testing
    const salesOpportunities = (0, useSalesOpportunities_1.useSalesOpportunities)({ autoFetch: false });
    const products = (0, useProducts_1.useProducts)({ autoFetch: false });
    const productSearch = (0, useProducts_1.useProductSearch)();
    const artisans = (0, useArtisans_1.useArtisans)({ autoFetch: false });
    const geolocation = (0, useGeolocation_1.useGeolocation)({ autoStart: false });
    const testApi = async (key, endpoint, params) => {
        setApiLoading(prev => ({ ...prev, [key]: true }));
        setApiErrors(prev => ({ ...prev, [key]: '' }));
        try {
            const url = params ? `${endpoint}?${params}` : endpoint;
            const response = await fetch(url);
            const data = await response.json();
            setApiResults(prev => ({ ...prev, [key]: data }));
        }
        catch (error) {
            setApiErrors(prev => ({
                ...prev,
                [key]: error instanceof Error ? error.message : 'Error desconocido',
            }));
        }
        finally {
            setApiLoading(prev => ({ ...prev, [key]: false }));
        }
    };
    const testGeolocation = async () => {
        await geolocation.getCurrentLocation();
    };
    return ((0, jsx_runtime_1.jsx)("div", { className: "min-h-screen bg-gray-50 py-8", children: (0, jsx_runtime_1.jsxs)("div", { className: "mx-auto max-w-6xl px-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "mb-8 text-center", children: [(0, jsx_runtime_1.jsx)("h1", { className: "mb-2 text-3xl font-bold text-gray-800", children: "\uD83E\uDDEA Test de Integraciones API + Hooks + UI" }), (0, jsx_runtime_1.jsx)("p", { className: "text-gray-600", children: "Demostraci\u00F3n completa de todas las funcionalidades implementadas" })] }), (0, jsx_runtime_1.jsx)(TestSection, { title: "\uD83C\uDF10 Tests de APIs Backend", children: (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 gap-4 md:grid-cols-2", children: [(0, jsx_runtime_1.jsx)(ApiTest, { title: "Sales Opportunities API", endpoint: "/api/sales-opportunities", onTest: () => testApi('opportunities', '/api/sales-opportunities'), loading: apiLoading.opportunities || false, data: apiResults.opportunities, error: apiErrors.opportunities || null }), (0, jsx_runtime_1.jsx)(ApiTest, { title: "Products API", endpoint: "/api/products", onTest: () => testApi('products', '/api/products'), loading: apiLoading.products || false, data: apiResults.products, error: apiErrors.products || null }), (0, jsx_runtime_1.jsx)(ApiTest, { title: "Artisans API", endpoint: "/api/artisans", onTest: () => testApi('artisans', '/api/artisans'), loading: apiLoading.artisans || false, data: apiResults.artisans, error: apiErrors.artisans || null }), (0, jsx_runtime_1.jsx)(ApiTest, { title: "Products with Filters", endpoint: "/api/products?category=aceite", onTest: () => testApi('productsFiltered', '/api/products', 'category=aceite&available=true'), loading: apiLoading.productsFiltered || false, data: apiResults.productsFiltered, error: apiErrors.productsFiltered || null })] }) }), (0, jsx_runtime_1.jsx)(TestSection, { title: "\uD83C\uDFA3 Tests de Hooks Personalizados", children: (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 gap-6 md:grid-cols-2", children: [(0, jsx_runtime_1.jsxs)("div", { className: "rounded-lg border p-4", children: [(0, jsx_runtime_1.jsx)("h3", { className: "mb-3 font-medium text-gray-800", children: "useSalesOpportunities" }), (0, jsx_runtime_1.jsx)("button", { onClick: () => salesOpportunities.fetchOpportunities(), disabled: salesOpportunities.loading, className: "mb-2 rounded bg-green-600 px-3 py-1 text-sm text-white hover:bg-green-700 disabled:opacity-50", children: salesOpportunities.loading ? 'Cargando...' : 'Cargar Oportunidades' }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-1 text-sm", children: [(0, jsx_runtime_1.jsxs)("p", { children: ["\uD83D\uDCCA Total: ", salesOpportunities.total] }), (0, jsx_runtime_1.jsxs)("p", { children: ["\uD83D\uDD04 Loading: ", salesOpportunities.loading ? 'Sí' : 'No'] }), (0, jsx_runtime_1.jsxs)("p", { children: ["\u274C Error: ", salesOpportunities.error || 'Ninguno'] }), (0, jsx_runtime_1.jsxs)("p", { children: ["\uD83D\uDCCB Datos: ", salesOpportunities.hasData ? 'Disponibles' : 'Sin datos'] })] }), salesOpportunities.opportunities.length > 0 && ((0, jsx_runtime_1.jsx)("div", { className: "mt-2 rounded bg-gray-50 p-2 text-xs", children: (0, jsx_runtime_1.jsxs)("p", { children: ["\u00DAltima oportunidad: ", salesOpportunities.opportunities[0].title] }) }))] }), (0, jsx_runtime_1.jsxs)("div", { className: "rounded-lg border p-4", children: [(0, jsx_runtime_1.jsx)("h3", { className: "mb-3 font-medium text-gray-800", children: "useProducts" }), (0, jsx_runtime_1.jsxs)("div", { className: "mb-2 space-x-2", children: [(0, jsx_runtime_1.jsx)("button", { onClick: () => products.fetchProducts(), disabled: products.loading, className: "rounded bg-blue-600 px-3 py-1 text-sm text-white hover:bg-blue-700 disabled:opacity-50", children: "Cargar Productos" }), (0, jsx_runtime_1.jsx)("button", { onClick: () => products.filterByCategory('aceite'), disabled: products.loading, className: "rounded bg-amber-600 px-3 py-1 text-sm text-white hover:bg-amber-700 disabled:opacity-50", children: "Filtrar Aceite" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-1 text-sm", children: [(0, jsx_runtime_1.jsxs)("p", { children: ["\uD83D\uDCE6 Productos: ", products.products.length] }), (0, jsx_runtime_1.jsxs)("p", { children: ["\uD83D\uDCC4 Total: ", products.pagination.total] }), (0, jsx_runtime_1.jsxs)("p", { children: ["\u2795 M\u00E1s p\u00E1ginas: ", products.canLoadMore ? 'Sí' : 'No'] }), (0, jsx_runtime_1.jsxs)("p", { children: ["\uD83D\uDD0D Filtrado: ", products.isFiltered ? 'Sí' : 'No'] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "rounded-lg border p-4", children: [(0, jsx_runtime_1.jsx)("h3", { className: "mb-3 font-medium text-gray-800", children: "useArtisans" }), (0, jsx_runtime_1.jsx)("button", { onClick: () => artisans.fetchArtisans(), disabled: artisans.loading, className: "mb-2 rounded bg-purple-600 px-3 py-1 text-sm text-white hover:bg-purple-700 disabled:opacity-50", children: artisans.loading ? 'Cargando...' : 'Cargar Artesanos' }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-1 text-sm", children: [(0, jsx_runtime_1.jsxs)("p", { children: ["\uD83D\uDC68\u200D\uD83C\uDF3E Artesanos: ", artisans.artisans.length] }), (0, jsx_runtime_1.jsxs)("p", { children: ["\u2705 Verificados: ", artisans.verifiedArtisans.length] }), (0, jsx_runtime_1.jsxs)("p", { children: ["\u2B50 Top rated: ", artisans.topRatedArtisans.length] }), (0, jsx_runtime_1.jsxs)("p", { children: ["\uD83C\uDFD8\uFE0F Ubicaciones:", ' ', new Set(artisans.artisans.map(a => a.location.municipality)).size] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "rounded-lg border p-4", children: [(0, jsx_runtime_1.jsx)("h3", { className: "mb-3 font-medium text-gray-800", children: "useGeolocation" }), (0, jsx_runtime_1.jsx)("button", { onClick: testGeolocation, disabled: geolocation.loading, className: "mb-2 rounded bg-red-600 px-3 py-1 text-sm text-white hover:bg-red-700 disabled:opacity-50", children: geolocation.loading ? 'Obteniendo...' : 'Obtener Ubicación' }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-1 text-sm", children: [(0, jsx_runtime_1.jsxs)("p", { children: ["\uD83D\uDCCD Ubicaci\u00F3n: ", geolocation.hasLocation ? 'Disponible' : 'No disponible'] }), (0, jsx_runtime_1.jsxs)("p", { children: ["\uD83C\uDFDB\uFE0F En Ja\u00E9n: ", geolocation.isLocationInJaen ? 'Sí' : 'No'] }), (0, jsx_runtime_1.jsxs)("p", { children: ["\u274C Error: ", geolocation.error || 'Ninguno'] }), geolocation.location && ((0, jsx_runtime_1.jsxs)("p", { children: ["\uD83D\uDCCC Municipio: ", geolocation.location.municipality || 'Desconocido'] }))] })] })] }) }), (0, jsx_runtime_1.jsx)(TestSection, { title: "\uD83D\uDD0D Test de B\u00FAsqueda en Tiempo Real", children: (0, jsx_runtime_1.jsxs)("div", { className: "space-y-4", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "product-search-input", className: "mb-2 block text-sm font-medium text-gray-700", children: "Buscar productos (con debounce):" }), (0, jsx_runtime_1.jsx)("input", { id: "product-search-input", type: "text", value: productSearch.searchTerm, onChange: e => productSearch.setSearchTerm(e.target.value), placeholder: "Escribe 'aceite', 'queso', 'miel'...", className: "w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-sm text-gray-600", children: [(0, jsx_runtime_1.jsxs)("p", { children: ["Resultados encontrados: ", productSearch.products.length] }), productSearch.loading && (0, jsx_runtime_1.jsx)("p", { children: "\uD83D\uDD04 Buscando..." }), productSearch.isSearching && (0, jsx_runtime_1.jsxs)("p", { children: ["\uD83D\uDD0D B\u00FAsqueda activa: \"", productSearch.searchTerm, "\""] })] }), productSearch.products.length > 0 && ((0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3", children: productSearch.products.slice(0, 3).map(product => ((0, jsx_runtime_1.jsxs)("div", { className: "rounded-lg border bg-gray-50 p-3", children: [(0, jsx_runtime_1.jsx)("h4", { className: "text-sm font-medium", children: product.name }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-600", children: product.producer }), (0, jsx_runtime_1.jsxs)("p", { className: "text-xs text-gray-600", children: ["\uD83D\uDCCD ", product.location.municipality] }), (0, jsx_runtime_1.jsxs)("p", { className: "text-sm font-medium text-green-600", children: ["\u20AC", product.price] })] }, product.id))) }))] }) }), (0, jsx_runtime_1.jsx)(TestSection, { title: "\uD83C\uDF9B\uFE0F Test de Filtros Combinados", children: (0, jsx_runtime_1.jsx)("div", { className: "space-y-4", children: (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 gap-4 md:grid-cols-3", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "category-filter-select", className: "mb-1 block text-sm font-medium text-gray-700", children: "Categor\u00EDa:" }), (0, jsx_runtime_1.jsxs)("select", { id: "category-filter-select", onChange: e => products.filterByCategory(e.target.value), className: "w-full rounded-md border border-gray-300 px-3 py-2", children: [(0, jsx_runtime_1.jsx)("option", { value: "", children: "Todas" }), (0, jsx_runtime_1.jsx)("option", { value: "aceite", children: "Aceite" }), (0, jsx_runtime_1.jsx)("option", { value: "queso", children: "Queso" }), (0, jsx_runtime_1.jsx)("option", { value: "miel", children: "Miel" })] })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { htmlFor: "location-filter-select", className: "mb-1 block text-sm font-medium text-gray-700", children: "Ubicaci\u00F3n:" }), (0, jsx_runtime_1.jsxs)("select", { id: "location-filter-select", onChange: e => products.filterByLocation(e.target.value), className: "w-full rounded-md border border-gray-300 px-3 py-2", children: [(0, jsx_runtime_1.jsx)("option", { value: "", children: "Todas" }), (0, jsx_runtime_1.jsx)("option", { value: "\u00DAbeda", children: "\u00DAbeda" }), (0, jsx_runtime_1.jsx)("option", { value: "Cazorla", children: "Cazorla" }), (0, jsx_runtime_1.jsx)("option", { value: "And\u00FAjar", children: "And\u00FAjar" })] })] }), (0, jsx_runtime_1.jsx)("div", { children: (0, jsx_runtime_1.jsxs)("fieldset", { className: "rounded-md border border-gray-200 p-3", children: [(0, jsx_runtime_1.jsx)("legend", { className: "px-2 text-sm font-medium text-gray-700", children: "Especiales:" }), (0, jsx_runtime_1.jsxs)("div", { className: "mt-2 space-y-1", children: [(0, jsx_runtime_1.jsx)("button", { onClick: () => products.getSeasonalProducts(), className: "w-full rounded bg-orange-600 px-3 py-1 text-sm text-white hover:bg-orange-700", children: "Solo Temporada" }), (0, jsx_runtime_1.jsx)("button", { onClick: () => products.getAvailableProducts(), className: "w-full rounded bg-green-600 px-3 py-1 text-sm text-white hover:bg-green-700", children: "Solo Disponibles" })] })] }) })] }) }) }), (0, jsx_runtime_1.jsx)(TestSection, { title: "\uD83D\uDCCA Resumen de Estado Global", children: (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-2 gap-4 text-center md:grid-cols-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "rounded-lg bg-blue-50 p-4", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-2xl font-bold text-blue-600", children: salesOpportunities.opportunities.length }), (0, jsx_runtime_1.jsx)("div", { className: "text-sm text-blue-800", children: "Oportunidades" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "rounded-lg bg-green-50 p-4", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-2xl font-bold text-green-600", children: products.products.length }), (0, jsx_runtime_1.jsx)("div", { className: "text-sm text-green-800", children: "Productos" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "rounded-lg bg-purple-50 p-4", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-2xl font-bold text-purple-600", children: artisans.artisans.length }), (0, jsx_runtime_1.jsx)("div", { className: "text-sm text-purple-800", children: "Artesanos" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "rounded-lg bg-red-50 p-4", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-2xl font-bold text-red-600", children: geolocation.hasLocation ? '✅' : '❌' }), (0, jsx_runtime_1.jsx)("div", { className: "text-sm text-red-800", children: "Geolocalizaci\u00F3n" })] })] }) }), (0, jsx_runtime_1.jsx)(TestSection, { title: "\uD83C\uDFA8 V0 Integration Testing", children: (0, jsx_runtime_1.jsxs)("div", { className: "space-y-4", children: [(0, jsx_runtime_1.jsx)("p", { className: "text-gray-600", children: "Ejemplo de integraci\u00F3n con componentes generados en V0.dev" }), (0, jsx_runtime_1.jsx)(V0ComponentTemplate_1.default, {})] }) }), (0, jsx_runtime_1.jsx)("div", { className: "mt-8 text-center", children: (0, jsx_runtime_1.jsx)("a", { href: "/", className: "inline-block rounded-lg bg-green-600 px-6 py-3 text-white transition-colors hover:bg-green-700", children: "\uD83C\uDFE0 Volver al Dashboard Principal" }) })] }) }));
};
exports.default = IntegrationTestPage;
//# sourceMappingURL=page.js.map