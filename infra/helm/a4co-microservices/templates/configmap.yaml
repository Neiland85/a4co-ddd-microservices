apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "a4co.fullname" . }}-config
  labels:
    {{- include "a4co.labels" . | nindent 4 }}
    app.kubernetes.io/component: configuration
data:
  # Global configuration
  ENVIRONMENT: {{ .Values.global.environment | quote }}
  
  # Database configuration
  DATABASE_HOST: {{ .Values.global.database.host | quote }}
  DATABASE_PORT: {{ .Values.global.database.port | quote }}
  DATABASE_NAME: {{ .Values.global.database.name | quote }}
  DATABASE_SSL: {{ .Values.global.database.ssl | quote }}
  
  # NATS configuration
  NATS_HOST: {{ .Values.global.nats.host | quote }}
  NATS_PORT: {{ .Values.global.nats.port | quote }}
  NATS_CLUSTER: {{ .Values.global.nats.cluster | quote }}
  
  # Redis configuration
  REDIS_HOST: {{ .Values.global.redis.host | quote }}
  REDIS_PORT: {{ .Values.global.redis.port | quote }}
  REDIS_DB: {{ .Values.global.redis.db | quote }}
  
  # Application configuration
  LOG_FORMAT: "json"
  METRICS_ENABLED: "true"
  METRICS_PORT: "9090"
  TRACING_ENABLED: "true"
  JAEGER_ENDPOINT: "http://jaeger-collector.a4co-observability.svc.cluster.local:14268/api/traces"
  
  # Feature flags
  FEATURE_FLAG_CACHE_ENABLED: "true"
  FEATURE_FLAG_RATE_LIMITING: "true"
  FEATURE_FLAG_CIRCUIT_BREAKER: "true"
