================================================================================
  ___    _  _    ____    ___      __  __  _                                     
 / _ \  | || |  / ___|  / _ \    |  \/  |(_)  ___  _ __  ___   ___  _ __ __   __
| |_| | | || |_| |     | | | |   | |\/| || | / __|| '__|/ _ \ / __|| '__| \ \ / /
|  _  | |__   _| |___  | |_| |   | |  | || || (__ | |  | (_) |\__ \| |    \ V / 
|_| |_|    |_|  \____|  \___/    |_|  |_||_| \___||_|   \___/ |___/|_|     \_/  
                                                                                  
================================================================================

üéâ ¬°Deployment exitoso!

Ambiente: {{ .Values.global.environment }}
Namespace: {{ .Release.Namespace }}
Release: {{ .Release.Name }}
Chart: {{ .Chart.Name }}-{{ .Chart.Version }}

================================================================================
üìä ESTADO DE LOS SERVICIOS
================================================================================

{{- if .Values.authService.enabled }}
‚úì Auth Service       - {{ .Values.authService.replicaCount }} r√©plicas
{{- end }}
{{- if .Values.productService.enabled }}
‚úì Product Service    - {{ .Values.productService.replicaCount }} r√©plicas
{{- end }}
{{- if .Values.orderService.enabled }}
‚úì Order Service      - {{ .Values.orderService.replicaCount }} r√©plicas
{{- end }}
{{- if .Values.paymentService.enabled }}
‚úì Payment Service    - {{ .Values.paymentService.replicaCount }} r√©plicas
{{- end }}
{{- if .Values.inventoryService.enabled }}
‚úì Inventory Service  - {{ .Values.inventoryService.replicaCount }} r√©plicas
{{- end }}

================================================================================
üîó ACCESO A LA PLATAFORMA
================================================================================

{{- if .Values.ingress.enabled }}
{{- range .Values.ingress.hosts }}

API Base URL: {{ if $.Values.global.tls.enabled }}https{{ else }}http{{ end }}://{{ .host }}

Endpoints disponibles:
{{- range .paths }}
  ‚Ä¢ {{ .path }} ‚Üí {{ .service }}
{{- end }}
{{- end }}

{{- if .Values.global.tls.enabled }}
üîí TLS/SSL: Habilitado ({{ .Values.global.tls.issuer }})
{{- else }}
‚ö†Ô∏è  TLS/SSL: Deshabilitado (solo para desarrollo)
{{- end }}

{{- else }}

‚ö†Ô∏è  Ingress deshabilitado. Usa port-forward para acceder:

  kubectl port-forward -n {{ .Release.Namespace }} svc/auth-service 3001:3001
  kubectl port-forward -n {{ .Release.Namespace }} svc/product-service 3003:3003
  kubectl port-forward -n {{ .Release.Namespace }} svc/order-service 3004:3004
  kubectl port-forward -n {{ .Release.Namespace }} svc/payment-service 3006:3006
  kubectl port-forward -n {{ .Release.Namespace }} svc/inventory-service 3007:3007

{{- end }}

================================================================================
üìà MONITOREO Y OBSERVABILIDAD
================================================================================

{{- if .Values.observability.enabled }}

Prometheus:
  kubectl port-forward -n a4co-observability svc/prometheus-server 9090:80
  URL: http://localhost:9090

Grafana:
  kubectl port-forward -n a4co-observability svc/grafana 3000:80
  URL: http://localhost:3000
  Usuario: admin
  Password: kubectl get secret -n a4co-observability grafana -o jsonpath="{.data.admin-password}" | base64 --decode

{{- if .Values.observability.jaeger.enabled }}
Jaeger:
  kubectl port-forward -n a4co-observability svc/jaeger-query 16686:16686
  URL: http://localhost:16686
{{- end }}

{{- else }}

‚ö†Ô∏è  Observabilidad deshabilitada

{{- end }}

================================================================================
üõ†Ô∏è  COMANDOS √öTILES
================================================================================

Ver estado de los pods:
  kubectl get pods -n {{ .Release.Namespace }}

Ver logs (todos los servicios):
  kubectl logs -f -n {{ .Release.Namespace }} -l tier=backend

Ver logs (servicio espec√≠fico):
  kubectl logs -f -n {{ .Release.Namespace }} -l app=order-service

Ver m√©tricas de recursos:
  kubectl top pods -n {{ .Release.Namespace }}

Ver estado de auto-scaling:
  kubectl get hpa -n {{ .Release.Namespace }}

Ver servicios:
  kubectl get svc -n {{ .Release.Namespace }}

Ver ingress:
  kubectl get ingress -n {{ .Release.Namespace }}

Reiniciar un servicio:
  kubectl rollout restart deployment/order-service -n {{ .Release.Namespace }}

================================================================================
üîÑ ACTUALIZACI√ìN Y ROLLBACK
================================================================================

Actualizar el deployment:
  helm upgrade {{ .Release.Name }} infra/helm/a4co-microservices \
    --namespace {{ .Release.Namespace }} \
    --reuse-values

Ver historial de releases:
  helm history {{ .Release.Name }} -n {{ .Release.Namespace }}

Rollback a versi√≥n anterior:
  helm rollback {{ .Release.Name }} -n {{ .Release.Namespace }}

Rollback a revisi√≥n espec√≠fica:
  helm rollback {{ .Release.Name }} [REVISION] -n {{ .Release.Namespace }}

================================================================================
üìö DOCUMENTACI√ìN
================================================================================

Documentaci√≥n completa: docs/KUBERNETES_DEPLOYMENT.md

Para soporte: team@a4co.com
GitHub: https://github.com/neiland85/a4co-ddd-microservices

================================================================================

‚ö° La plataforma est√° lista para recibir tr√°fico!

Para verificar que todo est√° funcionando correctamente:

  kubectl get pods -n {{ .Release.Namespace }} --watch

Esperando a que todos los pods est√©n en estado "Running" y "Ready"...

================================================================================
